name: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–¥–∞–Ω–∏—è: –ü—Ä–∞–∫—Ç–∏–∫–∞ –ø–æ –ª–æ–∫–∞—Ç–æ—Ä–∞–º

on:
  push:
    branches: [main, master]
  pull_request:
    branches: [main, master]

permissions:
  checks: write
  actions: read
  contents: read

jobs:
  grade:
    name: "–ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–¥–∞–Ω–∏—è"
    runs-on: ubuntu-22.04
    timeout-minutes: 10

    steps:
      - name: Checkout –∫–æ–¥–∞
        uses: actions/checkout@v4

      - name: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        run: |
          pip install -r requirements.txt
          playwright install-deps
          playwright install chromium

      - name: üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–≤
        run: python tools/check_linters.py
        continue-on-error: true

      - name: üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Ç–æ–≥–æ–≤–æ–≥–æ –æ—Ç—á—ë—Ç–∞
        run: python tools/generate_summary.py
        env:
          GITHUB_STEP_SUMMARY: ${{ github.step_summary }}